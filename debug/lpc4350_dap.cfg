set _CHIPNAME lpc4350
set _M0_CPUTAPID 0x4ba00477
set _M4_SWDTAPID 0x2ba01477
set _M0_TAPID 0x0BA01477
set _TRANSPORT swd
set _ENDIAN little

transport select $_TRANSPORT

swd newdap $_CHIPNAME m4 -irlen 4 -ircapture 0x1 -irmask 0xf -expected-id $_M4_SWDTAPID
dap create $_CHIPNAME.dapm4 -chain-position $_CHIPNAME.m4

#swd newdap $_CHIPNAME m0 -irlen 4 -ircapture 0x1 -irmask 0xf -expected-id $_M0_TAPID
#dap create $_CHIPNAME.dapm0 -chain-position $_CHIPNAME.m0

target create $_CHIPNAME.m4 cortex_m -endian $_ENDIAN -dap $_CHIPNAME.dapm4
#target create $_CHIPNAME.m0 cortex_m -endian $_ENDIAN -dap $_CHIPNAME.dapm0
